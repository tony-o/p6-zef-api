#!/usr/bin/env perl6
use HTTP::Server::Async;
#use HTTP::Server::Router;
#use JSON::Fast;

use lib 'lib';
use Zef::API::DB;
use Zef::API::Middleware;
use Zef::API::Routing;

my HTTP::Server::Async $server .=new;

middleware $server;
routing $server;

#route '/register', -> $req, $res {
#  my %response = status => 0, ;
#
#
#  $res.close(to-json({
#    status => 500,
#    error  => 'Please provide JSON body for registration',
#  })) unless $req.params<body-parsed>;
#
#  my %query =
#    username => $req.params<body><username>,
#    password => $req.params<body><password>,
#    email    => $req.params<body><email>,
#  ; 
#   
#  db.search('user', %query);
#
#  $res.close(to-json(%response));
#};

$server.listen(True);
# vi:syntax=perl6
